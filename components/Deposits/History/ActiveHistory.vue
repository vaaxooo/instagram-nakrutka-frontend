<template>
    <div class="section">
        <div class="loader-details">
            <span class="material-icons loader"></span>
            <svg width="105" height="105" viewBox="0 0 105 105" fill="none" xmlns="http://www.w3.org/2000/svg" class="loader">
                <svg width="105" height="105" viewBox="0 0 105 105" fill="none" xmlns="http://www.w3.org/2000/svg" class="loader"><g><path fill-rule="evenodd" clip-rule="evenodd" d="M52.5005 0C53.605 0 54.5005 0.895426 54.5005 1.99999V9.62707C54.5005 10.7316 53.605 11.6271 52.5005 11.6271C51.3959 11.6271 50.5005 10.7316 50.5005 9.62707V1.99999C50.5005 0.895426 51.3959 0 52.5005 0Z" fill="currentColor" fill-opacity="0.24"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M78.4996 6.9707C79.4562 7.52298 79.784 8.74616 79.2317 9.70274L75.4181 16.308C74.8658 17.2646 73.6427 17.5923 72.6861 17.04C71.7295 16.4877 71.4018 15.2646 71.954 14.308L75.7676 7.70275C76.3199 6.74616 77.543 6.41842 78.4996 6.9707Z" fill="currentColor" fill-opacity="0.22"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M97.5298 26.0065C98.0821 26.963 97.7543 28.1862 96.7977 28.7385L90.1925 32.552C89.2359 33.1043 88.0127 32.7766 87.4604 31.82C86.9082 30.8634 87.2359 29.6402 88.1925 29.088L94.7977 25.2744C95.7543 24.7221 96.9775 25.0499 97.5298 26.0065Z" fill="currentColor" fill-opacity="0.2"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M104.5 52.001C104.5 53.1055 103.605 54.001 102.5 54.001H94.8729C93.7684 54.001 92.8729 53.1055 92.8729 52.001C92.8729 50.8964 93.7684 50.001 94.8729 50.001H102.5C103.605 50.001 104.5 50.8964 104.5 52.001Z" fill="currentColor" fill-opacity="0.18"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M97.5322 78.0035C96.9799 78.9601 95.7568 79.2879 94.8002 78.7356L88.1949 74.922C87.2384 74.3698 86.9106 73.1466 87.4629 72.19C88.0152 71.2334 89.2384 70.9057 90.1949 71.4579L96.8002 75.2715C97.7568 75.8238 98.0845 77.0469 97.5322 78.0035Z" fill="currentColor" fill-opacity="0.16"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M78.4984 97.0371C77.5418 97.5894 76.3187 97.2616 75.7664 96.3051L71.9528 89.6998C71.4006 88.7432 71.7283 87.5201 72.6849 86.9678C73.6415 86.4155 74.8647 86.7432 75.4169 87.6998L79.2305 94.3051C79.7828 95.2616 79.455 96.4848 78.4984 97.0371Z" fill="currentColor" fill-opacity="0.14"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M52.4985 104.004C51.394 104.004 50.4986 103.108 50.4986 102.004V94.3768C50.4986 93.2723 51.394 92.3768 52.4985 92.3768C53.6031 92.3768 54.4985 93.2723 54.4985 94.3768V102.004C54.4985 103.108 53.6031 104.004 52.4985 104.004Z" fill="currentColor" fill-opacity="0.12"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M26.4989 97.0352C25.5423 96.4829 25.2146 95.2597 25.7669 94.3031L29.5804 87.6979C30.1327 86.7413 31.3559 86.4135 32.3124 86.9658C33.269 87.5181 33.5968 88.7413 33.0445 89.6979L29.231 96.3031C28.6787 97.2597 27.4555 97.5874 26.4989 97.0352Z" fill="currentColor" fill-opacity="0.1"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M7.46534 78.0043C6.91305 77.0477 7.2408 75.8245 8.19738 75.2722L14.8026 71.4587C15.7592 70.9064 16.9824 71.2342 17.5347 72.1908C18.087 73.1473 17.7592 74.3705 16.8026 74.9228L10.1974 78.7363C9.24079 79.2886 8.01762 78.9609 7.46534 78.0043Z" fill="currentColor" fill-opacity="0.08"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 52.0039C0.5 50.8994 1.39543 50.0039 2.49999 50.0039H10.1271C11.2316 50.0039 12.1271 50.8994 12.1271 52.0039C12.1271 53.1085 11.2316 54.0039 10.1271 54.0039H2.49999C1.39543 54.0039 0.5 53.1085 0.5 52.0039Z" fill="currentColor" fill-opacity="0.06"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M7.46435 26.0053C8.01663 25.0487 9.23981 24.7209 10.1964 25.2732L16.8016 29.0868C17.7582 29.639 18.086 30.8622 17.5337 31.8188C16.9814 32.7754 15.7582 33.1031 14.8016 32.5508L8.1964 28.7373C7.23982 28.185 6.91207 26.9618 7.46435 26.0053Z" fill="currentColor" fill-opacity="0.04"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M26.4977 6.97168C27.4542 6.4194 28.6774 6.74715 29.2297 7.70373L33.0432 14.309C33.5955 15.2656 33.2678 16.4887 32.3112 17.041C31.3546 17.5933 30.1314 17.2656 29.5792 16.309L25.7656 9.70372C25.2133 8.74714 25.5411 7.52397 26.4977 6.97168Z" fill="currentColor" fill-opacity="0.02"></path></g></svg>
            </svg>
            <div class="loader-image">
                <div class="method-icon mx-0 icon-loader">
                    <span class="material-icons icon payment-icon">credit_score</span>
                </div>
            </div>
        </div>


        <div class="hdetails-info">
            <div class="hdetails-info__title">В обработке</div>
            <div class="hdetails-info__value">Ваш платеж на {{ transaction.is_fiat ? (+transaction.amount).toFixed(2) : (+transaction.amount).toFixed(6) }} {{ transaction.symbol }} будет подтвержден автоматически после зачисления</div>


            <div class="payment-details">
                <div class="details">
                    <div class="payment-title">Сумма перевода</div>
                    <div class="payment-value">{{ transaction.is_fiat ? (+transaction.amount).toFixed(2) : (+transaction.amount).toFixed(6) }} {{ transaction.symbol }}</div>
                </div>
                <div class="details" v-if="transaction.is_fiat">
                    <div class="payment-title">Номер карты для перевода</div>
                    <div class="payment-value">{{ transaction.bank.card_number }}</div>
                </div>
                <div class="details" v-else>
                    <div class="payment-title">Адрес получателя</div>
                    <div class="payment-value">{{ transaction.temporary_address }}</div>
                </div>
                <div class="details" v-if="transaction.is_fiat">
                    <div class="payment-title">Банк получателя</div>
                    <div class="payment-value">Сбербанк</div>
                </div>
                <div class="details" v-else>
                    <div class="payment-title">Сеть</div>
                    <div class="payment-value">{{ transaction.asset.network }}</div>
                </div>
                <div class="details" v-if="transaction.is_fiat && transaction.card_holder">
                    <div class="payment-title">Имя получателя</div>
                    <div class="payment-value">{{ transaction.card_holder }}</div>
                </div>
            </div>

            <div class="payment-actions">
                <button type="button" class="btn btn-deposit btn-radius-8 btn-pay mb-2 w-100" v-if="transaction.is_fiat" @click="copyToClipboard(transaction.bank.card_number)">Скопировать номер карты</button>
                <button type="button" class="btn btn-deposit btn-radius-8 btn-pay mb-2 w-100" v-else @click="copyToClipboard(transaction.temporary_address)">Скопировать адрес</button>
                <button type="button" class="btn btn-providers btn-radius-8 btn-pay w-100">Поддержка</button>
            </div>
        </div>
    </div>
</template>
<script>
export default {
    props: {
        transaction: {
            type: Object,
            required: true
        }
    },
    data() {
        return {}
    },
    methods: {
        copyToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand("copy");
                this.$toast.success('Адрес скопирован в буфер обмена');
            } catch (err) {
                this.$toast.error('Не удалось скопировать адрес');
            }
            document.body.removeChild(textArea);
        },
    }
}
</script>